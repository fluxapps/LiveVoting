var xlvoVoter={init:function(o){var e=JSON.parse(o),t=new RegExp("amp;","g");e.base_url=e.base_url.replace(t,""),this.config=e,this.ready=!0},config:{base_url:"",cmd_voting_data:"",lng:{player_seconds:"s"}},player:{active_voting_id:0,status:-1,countdown:0,has_countdown:!1,countdown_classname:""},status:-1,debug:!0,delay:1e3,counter:0,forced_update:300,countdown:0,timeout:null,active_voting_id:-1,run:function(){this.loadVotingData(),this.initElements()},initElements:function(){this.countdown_element=$("#xlvo_countdown"),this.player_element=$("#xlvo_voter_player")},loadVotingData:function(){$.get(xlvoVoter.config.base_url,{cmd:"getVotingData"}).done(function(o){xlvoVoter.log(o);var e=xlvoVoter.player.active_voting_id!=o.active_voting_id,t=xlvoVoter.player.status!=o.status,n=xlvoVoter.counter>xlvoVoter.forced_update;xlvoVoter.player=o,t||e||n?xlvoVoter.replaceHTML(xlvoVoter.handleCountdown()):xlvoVoter.handleCountdown(),xlvoVoter.timeout=setTimeout(xlvoVoter.loadVotingData,xlvoVoter.delay),xlvoVoter.counter++}).fail(function(){xlvoVoter.timeout=setTimeout(xlvoVoter.loadVotingData,xlvoVoter.delay)})},handleCountdown:function(){xlvoVoter.player.has_countdown?(xlvoVoter.log("has countdown: "+(xlvoVoter.player.has_countdown?"yes, "+xlvoVoter.player.countdown:"no")),xlvoVoter.countdown_element.removeClass(),xlvoVoter.countdown_element.text(xlvoVoter.player.countdown.toString()+" "+xlvoVoter.config.lng.player_seconds),xlvoVoter.countdown_element.show(),xlvoVoter.countdown_element.addClass("label label-cd-"+xlvoVoter.player.countdown_classname)):(xlvoVoter.countdown_element.removeClass(),xlvoVoter.countdown_element.hide())},replaceHTML:function(o){xlvoVoter.log("replace"),o=o?o:function(){},$.get(xlvoVoter.config.base_url,{cmd:"getHTML"}).done(function(e){xlvoVoter.player_element.replaceWith('<div id="xlvo_voter_player">'+e+"</div>"),xlvoVoter.countdown_element=$("#xlvo_countdown"),o()})},log:function(o){if(xlvoVoter.debug){var e=new Error;e.stack;console.log(o)}}};